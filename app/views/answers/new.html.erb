<div class="flex-1 flex flex-col w-full">  <div class="flex-1 overflow-y-auto p-4 flex flex-col justify-end">
    <!-- チャットメッセージの表示エリア -->
    <% @answers.each do |answer| %>
      <div class="flex justify-start mb-4">
        <div class="bg-gray-200 text-gray-800 p-3 rounded-lg rounded-bl-none max-w-xs md:max-w-md lg:max-w-lg">
          <!-- 質問部分 -->
          <p><%= answer.question %></p>
        </div>
      </div>
      
      <div class="flex justify-end mb-4">
        <div class="bg-blue-500 text-white p-3 rounded-lg rounded-br-none max-w-xs md:max-w-md lg:max-w-lg">
            <!-- 回答部分 -->
          <p><%= answer.answer %></p>
        </div>
      </div>
    <% end %>
    <!-- 現在の質問がある場合に表示 -->
    <% if @current_question.present? %>
      <div class="flex justify-start mb-4">
        <div class="bg-gray-200 text-gray-800 p-3 rounded-lg rounded-bl-none max-w-xs md:max-w-md lg:max-w-lg">
            <!-- 現在の質問部分 -->
          <p><%= @current_question %></p>
        </div>
      </div>
    <% end %>
  </div>

  <% if @current_question.present? %>
    <!-- model: @answer: formの入力内容を@answerというオブジェクトに紐づけし、url: answers_path: フォームの送信先をAnswersControllerのcreate -->
    <%= form_with model: @answer, url: answers_path, local: true, class: "flex items-center w-full bg-white p-2 border-t border-gray-300" do |form| %>
      <!-- hidden_field: ユーザーには見えない隠しフィールドを生成しvalue: @consultation.id: ここに、現在のカウンセリングのIDをセット -->
      <%= form.hidden_field :consultation_id, value: @consultation.id %>
      <%= form.hidden_field :question, value: @current_question %>
      <!-- text_field: ユーザーが回答を入力するためのテキストフィールドを生成 -->
      <div class="flex-grow mr-2"> <%= form.text_field :answer, placeholder: "メッセージを入力", class: "w-full border rounded-full py-2 px-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
      </div>
      
      <div> <%= form.submit "送信", class: "bg-blue-500 text-white rounded-full py-2 px-4 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer whitespace-nowrap" %> </div>
    <% end %>
  <% end %>
</div>